#:kivy 1.8

BoxLayout:
    orientation: 'vertical'
    grid: grid
    prev: prev
    ActionBar:
        pos_hint: {'top': 1}
        ActionView:
            ActionPrevious:
                id: prev
                app_icon: 'data/icon.png'
                with_previous: True
    GridLayout:
        id: grid
        cols: 2 if root.width < root.height else 4
        size_hint: (1, 1)

<BulbImage@ToggleButtonBehavior+Image>:
    allow_stretch: True
    pos_hint: {'center_y': .6}
    size_hint_y: .8

<BulbLabel@Label>:
    size_hint_y: .2

<Dimmer>:
    image: image
    slider: slider
    size_hint_y: None
    height: 1.25 * image.height
    BulbImage:
        id: image
        on_press: root.on_press()
    Slider:
        id: slider
        on_value: root.on_slider_value()
        orientation: 'vertical'
        pos_hint: {'center_x': .6 + .25 * image.height / image.width, 'center_y': .6}
        size_hint: (.3 * image.height / image.width, .8)
    BulbLabel:
        pos_hint: {'center_y': .1 * image.height / image.width}
        text: root.label

<Relay>:
    image: image
    size_hint_y: None
    height: 1.25 * image.height
    BulbImage:
        id: image
        on_press: root.on_press()
    BulbLabel:
        pos_hint: {'center_y': .1 * image.height / image.width}
        text: root.label
